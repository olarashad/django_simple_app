{% extends "base.html" %}
{% block title %}{% if mode == "edit" %}Edit{% else %}Create{% endif %} Product Â· Simple Shop{% endblock %}
{% block header %}{% if mode == "edit" %}Edit{% else %}Create{% endif %} Product{% endblock %}
{% block subheader %}Fill the fields below; Name & Code are required.{% endblock %}

{% block content %}
<form method="post" action="{% if mode == 'edit' %}{% url 'product_edit' product.pk %}{% else %}{% url 'product_create' %}{% endif %}" enctype="multipart/form-data">
  {% csrf_token %}
  <label>
    Name
    <input type="text" name="name" value="{{ product.name|default_if_none:'' }}" placeholder="Awesome Widget" required>
  </label>
  <label>
    Code <small class="muted">unique</small>
    <input type="text" name="code" value="{{ product.code|default_if_none:'' }}" placeholder="SKU-001" required>
  </label>
  <label>
    Price
    <input type="number" step="0.01" name="price" value="{{ product.price|default_if_none:'0.00' }}" placeholder="99.99">
  </label>
  <label>
    In Stock Items
    <input type="number" name="instock_items" value="{{ product.instock_items|default_if_none:'0' }}" placeholder="100">
  </label>
  <label>
    Description
    <textarea name="description" rows="4" placeholder="Short description...">{{ product.description|default_if_none:'' }}</textarea>
  </label>
  <label>
    Image
    <input type="file" name="image">
  </label>

  <label for="category">Category</label>
  <select name="category" id="category">
    <option value="">-- None --</option>
    {% for cat in categories %}
      <option value="{{ cat.pk }}" {% if product and product.category and product.category.pk == cat.pk %}selected{% endif %}>
        {{ cat.name }}
      </option>
    {% endfor %}
  </select>

  <button type="submit">{% if mode == "edit" %}Save Changes{% else %}Create{% endif %}</button>
  <a href="{% if mode == 'edit' %}{% url 'product_detail' product.pk %}{% else %}{% url 'product_list' %}{% endif %}" class="secondary">Cancel</a>
</form>
{% endblock %}
